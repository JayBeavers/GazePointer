<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Irisbond Duo API: Simple Calibration (using the API default GUIs)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="Irisbond.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Irisbond Duo API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">notitle</a></li><li class="navelem"><a class="el" href="_tutorial__step_by_step_calibration.html">Step by step calibration</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Simple Calibration (using the API default GUIs) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Tutorial_CalibrationSimple_Intro"></a>
Introduction</h1>
<p>Calibration is a process where the API learns the relationship between the user and the screen, so that it can calculate more precisely where the user is looking. In this process, the user is asked to look at one target moving on the screen and stopping at several locations.</p>
<p>In this tutorial, a basic calibration using the default GUIs existing in the API is explained.</p>
<p>The API has 3 different GUIs for the calibration procedure:</p><ul>
<li>Calibration GUI: shows a target moving on the screen</li>
<li>Calibration error GUI: when the user is not detected while calibrating, a GUI is shown to tell the user that the detection failed. The user can then retry last calibration point or cancel calibration.</li>
<li>Calibration results GUI: when calibration finishes, a GUI with the results is shown. This GUI contains several coloured points that tell in a qualitative way how good the calibration is.</li>
</ul>
<h1><a class="anchor" id="Tutorial_CalibrationSimple_EnableGUIs"></a>
Enable the default GUIs</h1>
<p>Once the API is running, the first step to start a calibration with the default GUIs is to enable the 3 GUIs: </p><div class="fragment"><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#a9ed3c3940d8f1c4ffe881b2515b98d3e">showCalibrationGUI</a>(<span class="keyword">true</span>); </div><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#ab9fb20170d1cac8db6f7cf11254ce0c6">showCalibrationPointErrorGUI</a>(<span class="keyword">true</span>);</div><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#a787dd27f466841a2221a8960d08fc606">showCalibrationResultsGUI</a>(<span class="keyword">true</span>); </div></div><!-- fragment --><h1><a class="anchor" id="Tutorial_CalibrationSimple_Customization"></a>
Customize the calibration process</h1>
<p>With the following steps, the calibration process can be configured. These functions need to be called each time and before the <a class="el" href="namespace_irisbond_a_p_i.html#a85b5f7036c92498130a91a391655a3dd" title="Start a calibration process to adapt the eye tracker to the user&#39;s eyes. waitForCalibrationToEnd() mu...">startCalibration()</a>, <a class="el" href="namespace_irisbond_a_p_i.html#ac92550c2471bbd62f940d6ecdbe915f0" title="Start a 3-point calibration rectification to improve the worst 3 calibration points in a 5,...">startImproveCalibration()</a> or <a class="el" href="namespace_irisbond_a_p_i.html#ac038faa0c5965ad61c9c7acebe3df294" title="Start a 1-point calibration rectification to improve the calibration waitForCalibrationToEnd() must b...">startCalibrationRectification()</a> functions are called.</p>
<h2><a class="anchor" id="Tutorial_CalibrationSimple_Customization_Times"></a>
Customize the calibration times</h2>
<p>First, the user can change the time the target spends travelling between points, and the time the target stays fixated recording the user. This can be done using the following function:</p>
<div class="fragment"><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#aaf533036dbb6a9aad8fce94f0df01c5d">setCalibrationParameters</a>(travelTime, fixationTime);</div></div><!-- fragment --><h2><a class="anchor" id="Tutorial_CalibrationSimple_Customization_Colors"></a>
Customize the calibration colors</h2>
<p>Also, in order to make this calibration GUI fit the style of your application, you can select the colors of the elements of the GUI. </p><div class="fragment"><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#af9e4dcf93244ecfee8ceb150a7d2990b">setCalibrationColors</a>(targetColor, backgroundColor);</div></div><!-- fragment --><p>These colors need to be 32 bit unsigned integers, RGBA channels, in that order. You can use strings with hexadecimal numbers refering to the color like such: </p><div class="fragment"><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#af9e4dcf93244ecfee8ceb150a7d2990b">setCalibrationColors</a>(Convert.ToUInt32(<span class="stringliteral">&quot;0xff0000ff&quot;</span>, 16), Convert.ToUInt32(<span class="stringliteral">&quot;0xffffffff&quot;</span>, 16));</div></div><!-- fragment --><p>"0xff0000ff" being red and "0xffffffff" being white.</p>
<p>The background on the calibration will always be opaque.</p>
<h2><a class="anchor" id="Tutorial_CalibrationSimple_Customization_Targets"></a>
Customize the calibration target</h2>
<p>The API has an option to show an image or an animation as the target of the calibration. Four functions are available to do perform this customization. The user can upload a .png image from a file calling this function:</p>
<div class="fragment"><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#a719370431bad87a5f4bc7ea9c2744167">loadTargetImage</a>(pathToImage);</div></div><!-- fragment --><p>where pathToImage needs to be the absolut path to the image file. The transparency of the png image will be respected.</p>
<p>The second option will be to use some preloaded images, the API has available the following images:</p>
<div class="image">
<img src="img/bird_small.png" alt="bird_small.png"/>
<div class="caption">
Bird: 0</div></div>
 <div class="image">
<img src="img/robot_small.png" alt="robot_small.png"/>
<div class="caption">
Robot: 1</div></div>
 <div class="image">
<img src="img/snail_small.png" alt="snail_small.png"/>
<div class="caption">
Snail: 2</div></div>
<p>You need to call the following function:</p>
<div class="fragment"><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#a1186a55ef44da72d1db2c968353e66d6">setLocalTargetImage</a>(imageIndexNumber);</div></div><!-- fragment --><p>where imageIndexNumber is the number that corresponds to each image.</p>
<p>The API has also the posibility to display animations in the calibration process. It has internally stored an animation of a funny walking duck. To use this animation, you just need to call the next function.</p>
<div class="fragment"><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#a884b41395a6300fe328a7e0210f7ae1c">setLocalTargetAnimation</a>();</div></div><!-- fragment --><div class="image">
<img src="img/duck.gif" alt="duck.gif"/>
<div class="caption">
Walking duck</div></div>
<p>Also, there is an option to attach a animation from a file. Since .gif is not supported yet, the user or the integrator will need to create a horizontal sprite sheet in .png format and pass the following arguments:</p>
<div class="fragment"><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#a70a72bd71b88315f9d1ea7bbb5492dac">loadTargetAnimationSpriteSheet</a>(absolutPathToFile, frames, loopTime);</div></div><!-- fragment --><p>where the frames is an integer for the number of frames in the image, and the loopTime is the time of the loop for the animation.</p>
<p>If the animation is transparent, the calibration GUI will show it as transparent too.</p>
<h1><a class="anchor" id="Tutorial_CalibrationSimple_StartCalibration"></a>
Start calibration</h1>
<p>To start calibrating, the 2 following functions must be called: </p><div class="fragment"><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#a85b5f7036c92498130a91a391655a3dd">startCalibration</a>(9);         <span class="comment">// 2, 3, 5, 9 or 16</span></div><div class="line"><a class="code" href="namespace_irisbond_a_p_i.html#a61a39af50f0c79d77d7f892895b01a9e">waitForCalibrationToEnd</a>(1);</div></div><!-- fragment --><p><a class="el" href="namespace_irisbond_a_p_i.html#a85b5f7036c92498130a91a391655a3dd" title="Start a calibration process to adapt the eye tracker to the user&#39;s eyes. waitForCalibrationToEnd() mu...">IrisbondAPI::startCalibration</a> takes as an argument the number of calibration points, that can be 2, 3, 5, 9 or 16. The more points, the more accurate the tracker can be. <a class="el" href="namespace_irisbond_a_p_i.html#a61a39af50f0c79d77d7f892895b01a9e" title="Wait during the calibration processes until they finish.">IrisbondAPI::waitForCalibrationToEnd</a> blocks the thread and waits until the calibration finishes.</p>
<p>Please, consider that the calibrations with 2 and 3 points are not considered as accurate calibrations. So, the results of these calibrations will not be sent. They should be treated as rectifications.</p>
<h1><a class="anchor" id="Tutorial_CalibrationSimple_CalibrationError"></a>
Error during calibration</h1>
<p>If the user is not found in one calibration point, the error GUI will be shown. The user can choose to try again or to cancel the calibration.</p>
<h1><a class="anchor" id="Tutorial_CalibrationSimple_FinishCalibration"></a>
Finish calibration</h1>
<p>When the calibration finishes, a GUI with the calibration results will be shown. It contains basic results on the calibration quality. The coloured points tell how good the calibration was in each calibration point. The user can then accept the calibration, improve it or ignore the current calibration and go back to a previous one. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
