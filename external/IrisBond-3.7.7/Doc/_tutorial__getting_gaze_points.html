<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Irisbond Duo API: Getting gaze points and tracking data</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
<link rel="shortcut icon" href="Irisbond.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Irisbond Duo API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">notitle</a></li><li class="navelem"><a class="el" href="_tutorial__step_by_step_calibration.html">Step by step calibration</a></li><li class="navelem"><a class="el" href="_tutorial__calibration_advanced.html">Advanced Calibration (using custom GUIs)</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Getting gaze points and tracking data </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Tutorial_GettingGazePoints_Intro"></a>
Introduction</h1>
<p>The API provides a series of callback functions that send the information with the gaze points, calibration targets or click events. Each callback is optional, that is, there is no need to set a function that won't be used.</p>
<p>For each callback defined in the API, the usage is the same in all cases:</p><ul>
<li>Define the callback function to be executed from the API, following the callback declarations in the documentation.</li>
<li>Assign the callback function to a callback variable (in C#).</li>
<li>Set the callback to the API.</li>
</ul>
<p>In this tutorial, you will be setting some callbacks. These callbacks are reset each time the Start() function of the API is called. Please, set all callbacks each time and after the Start() function is called.</p>
<h1><a class="anchor" id="Tutorial_GettingGazePoints_Gaze"></a>
Get the gaze points</h1>
<h2><a class="anchor" id="Tutorial_GettingGazePoints_Gaze1"></a>
Define the callback function</h2>
<p>Following the steps defined in the previous section, the first step is to define the callback function to be executed from the API. In this case, the function must match the <a class="el" href="namespace_irisbond_a_p_i.html#a4ee24d99760752426c9335b6e7377dd0" title="Function to be called when a new image is processed and a new gaze point is received.">IrisbondAPI::DATA_CALLBACK</a> definition.</p>
<p>This function can be as easy as the following one: </p><div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> fun_dataCallback(<span class="keywordtype">long</span> timestamp, </div><div class="line">                             <span class="keywordtype">float</span> mouseX, <span class="keywordtype">float</span> mouseY,</div><div class="line">                             <span class="keywordtype">float</span> mouseRawX, <span class="keywordtype">float</span> mouseRawY,</div><div class="line">                             <span class="keywordtype">int</span> screenWidth, <span class="keywordtype">int</span> screenHeight,</div><div class="line">                             <span class="keywordtype">bool</span> leftEyeDetected, <span class="keywordtype">bool</span> rightEyeDetected, </div><div class="line">                             <span class="keywordtype">int</span> imageWidth, <span class="keywordtype">int</span> imageHeight,</div><div class="line">                             <span class="keywordtype">float</span> leftEyeX, <span class="keywordtype">float</span> leftEyeY, <span class="keywordtype">float</span> leftEyeSize,</div><div class="line">                             <span class="keywordtype">float</span> rightEyeX, <span class="keywordtype">float</span> rightEyeY, <span class="keywordtype">float</span> rightEyeSize,</div><div class="line">                             <span class="keywordtype">float</span> distanceFactor)</div><div class="line">{</div><div class="line">    Console.WriteLine(<span class="stringliteral">&quot;Gaze point (&quot;</span> + mouseX + <span class="stringliteral">&quot;, &quot;</span> + mouseY + <span class="stringliteral">&quot;)&quot;</span>);</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="Tutorial_GettingGazePoints_Gaze2"></a>
Assign the callback function</h2>
<p>The second step is to assign the callback function to a callback variable. This is recommended in languages like C# where the garbage collector may destroy the reference to the callback function. In C++ this step is not required.</p>
<div class="fragment"><div class="line">IrisbondDuo.DATA_CALLBACK dataCallback = <span class="keyword">new</span> IrisbondDuo.DATA_CALLBACK(fun_dataCallback);</div></div><!-- fragment --><h2><a class="anchor" id="Tutorial_GettingGazePoints_Gaze3"></a>
Set the callback to the API</h2>
<p>The final step is to set the callback to the API. In C++, the pointer to the function can be set, without the risk of being deleted by the garbage collector (there isn't).</p>
<div class="fragment"><div class="line">IrisbondDuo.setDataCallback(dataCallback);</div></div><!-- fragment --><h2><a class="anchor" id="Tutorial_GettingGazePoints_Gaze4"></a>
Use the callback parameters</h2>
<p>The callback function providing the gaze data will be executed at 27 frames per second. It provides data like the gaze points, the eye detections, the eyes 2D position or the distance between the user and the tracker.</p>
<p>Please see <a class="el" href="_tutorial__high_d_p_i_screens.html">High DPI screens</a> for more information about the screen coordinates and the screen size.</p>
<p><b>Important:</b> the callbacks from the API are executed in the main thread, so the callback functions must not block the execution of the program. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
